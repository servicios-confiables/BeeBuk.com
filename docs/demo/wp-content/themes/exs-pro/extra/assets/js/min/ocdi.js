"use strict";!function(s){var o,l;"undefined"!=typeof ocdi&&(o={current:"",plugins:{install:[],activate:[]},demo:""},(l=s("#js-ocdi-modal-content")).length||((l=s(".ocdi__demo-import-notice")).length||(l=s(".ocdi-install-plugins-content")),l.find(".exs-ocdi-required-plugins").length&&l.next().find(".button-primary").attr("disabled","disabled")),l.on("dialogopen",function(i,e){l.find(".exs-ocdi-required-plugins").length&&l.next().find(".button-primary").attr("disabled","disabled")}),l.on("click",".exs-ocdi-install-plugins-button",function(i){var n=s(this);n.attr("disabled","disabled"),o.current="",o.plugins.install=n.data("install").split(","),o.plugins.activate=n.data("activate").split(","),o.demo=n.data("demo"),o.plugins.install.map(function(e,i,t){l.find("span.exs-ocdi-"+e).text(exs_ocdi.text_installing),n.next().css({visibility:"visible"}),s.post(ajaxurl,{action:"exs_install_and_activate_plugins",wpnonce:exs_ocdi.wpnonce,"plugins_activate[]":o.plugins.activate,"plugins_install[]":o.plugins.install,demo:o.demo,slug:o.plugins.install[i]},function(i){s.post(i.url,i).done(function(){l.find("span.exs-ocdi-"+e).text(exs_ocdi.text_activating),o.plugins.activate.push(e),o.plugins.install.splice(o.plugins.install.indexOf(e),1),0===o.plugins.install.length&&s.post(ajaxurl,{action:"exs_install_and_activate_plugins",wpnonce:exs_ocdi.wpnonce,"plugins_activate[]":o.plugins.activate,"plugins_install[]":o.plugins.install,demo:o.demo,slug:o.plugins.activate},function(i){s.post(i.url,i).done(function(){l.find('span[class*="exs-ocdi-"]').text(exs_ocdi.text_done),n.next().css({visibility:"hidden"}),l.next().find(".button-primary").removeAttr("disabled")}).fail(function(i){console.error(i),n.closest(".exs-ocdi-button-wrap").find(".exs-error").remove(),n.before('<div class="exs-error">'+exs_ocdi.text_fail_tgm+"<br></div>")})}).fail(function(i){console.error(i),n.closest(".exs-ocdi-button-wrap").find(".exs-error").remove(),n.before('<div class="exs-error">'+exs_ocdi.text_fail+"<br></div>")})}).fail(function(i){console.error(i),n.closest(".exs-ocdi-button-wrap").find(".exs-error").remove(),n.before('<div class="exs-error">'+exs_ocdi.text_fail_tgm+"<br></div>")})}).fail(function(i){console.error(i),n.closest(".exs-ocdi-button-wrap").find(".exs-error").remove(),n.before('<div class="exs-error">'+exs_ocdi.text_fail+"<br></div>")})})}))}(jQuery);